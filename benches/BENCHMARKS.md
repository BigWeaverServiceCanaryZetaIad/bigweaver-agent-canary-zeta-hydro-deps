# Available Benchmarks

This directory contains performance benchmarks comparing different dataflow implementations.

## Benchmark List

### Core Operations

#### arithmetic
Compares arithmetic operations across implementations.
- **Purpose**: Basic arithmetic throughput testing
- **Implementations**: timely, differential-dataflow, dfir_rs

#### identity  
Pass-through operations with no transformation.
- **Purpose**: Baseline overhead measurement
- **Implementations**: timely, dfir_rs (compiled, scheduled, surface)

#### upcase
String uppercasing operations.
- **Purpose**: Simple transformation benchmark
- **Implementations**: timely, dfir_rs

### Flow Control Patterns

#### fan_in
Multiple input streams merging into one.
- **Purpose**: Stream merging performance
- **Implementations**: timely, dfir_rs

#### fan_out
Single stream splitting to multiple outputs.
- **Purpose**: Stream splitting performance
- **Implementations**: timely, dfir_rs

#### fork_join
Fork-join pattern with parallel processing.
- **Purpose**: Parallel processing patterns
- **Implementations**: timely, dfir_rs

### Join Operations

#### join
Basic stream join operations.
- **Purpose**: Join performance
- **Implementations**: timely, dfir_rs

#### symmetric_hash_join
Symmetric hash join implementation.
- **Purpose**: Advanced join patterns
- **Implementations**: timely, dfir_rs

### Graph Operations

#### reachability
Graph reachability computation using iterative dataflow.
- **Purpose**: Iterative algorithm performance
- **Implementations**: timely, differential-dataflow, dfir_rs
- **Data**: Uses included edge list and reachability results

### Advanced Patterns

#### micro_ops
Collection of micro-operations for detailed performance analysis.
- **Purpose**: Fine-grained operation benchmarking
- **Implementations**: dfir_rs

#### words_diamond
Diamond pattern on word processing.
- **Purpose**: Complex data flow patterns
- **Implementations**: timely, dfir_rs
- **Data**: Uses included word list (words_alpha.txt)

#### futures
Async futures handling patterns.
- **Purpose**: Async operation performance
- **Implementations**: dfir_rs

## Running Benchmarks

### Run all benchmarks
```bash
cargo bench -p benches
```

### Run a specific benchmark
```bash
cargo bench -p benches --bench reachability
```

### Run benchmarks matching a pattern
```bash
cargo bench -p benches -- join
```

## Data Files

The benchmark suite includes several data files:
- `reachability_edges.txt` - Graph edges for reachability benchmark
- `reachability_reachable.txt` - Expected reachability results
- `words_alpha.txt` - English word list for text processing benchmarks

## Understanding Results

Benchmark results are generated by [Criterion.rs](https://github.com/bheisler/criterion.rs) and include:
- **Throughput measurements** - Operations per second
- **Statistical analysis** - Mean, standard deviation, outliers
- **HTML reports** - Detailed visualizations in `target/criterion/`
- **Comparison to baseline** - When available from previous runs

## Implementation Codes

- **timely**: Timely dataflow system
- **differential**: Differential dataflow (built on timely)
- **dfir_rs**: Hydro's dataflow IR
  - `compiled`: Compiled/optimized version
  - `scheduled`: Scheduled execution
  - `surface`: Surface syntax version
